OSRM={};OSRM.Control={};OSRM.GLOBALS={main_handle:{boxVisible:function(){return false}}};OSRM.GLOBALS.Localization={culture:"en-US"};OSRM.GLOBALS.DISTANCE_FORMAT=0;OSRM.G=OSRM.GLOBALS;function printWindow(){window.print()}OSRM.GLOBALS.icons={};OSRM.prefetchIcons=function(g){var e=[{id:"marker-source",image_id:"marker-source"},{id:"marker-target",image_id:"marker-target"},{id:"marker-via",image_id:"marker-via"},{id:"marker-highlight",image_id:"marker-highlight"}];var f=L.LabelMarkerIcon.extend({options:{shadowUrl:g["marker-shadow"].src,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,41],shadowAnchor:[13,41],popupAnchor:[0,-33]}});for(var h=0;h<e.length;h++){OSRM.G.icons[e[h].id]=new f({iconUrl:g[e[h].image_id].src})}};OSRM.drawMap=function(g,h){var e=new L.TileLayer(g.url,g.options);e.options.culture=OSRM.G.Localization.culture;OSRM.G.map=new OSRM.Control.Map("overview-map",{center:new L.LatLng(48.84,10.1),zoom:13,zoomAnimation:false,fadeAnimation:false,layers:[e],attributionControl:false,zoomControl:false,dragging:false,scrollWheelZoom:false,touchZoom:false,doubleClickZoom:false});OSRM.G.map.scaleControl=new L.Control.Scale();OSRM.G.map.scaleControl.options.metric=(OSRM.G.active_distance_format!=1);OSRM.G.map.scaleControl.options.imperial=(OSRM.G.active_distance_format==1);OSRM.G.map.scaleControl.addTo(OSRM.G.map);var f=new L.LatLngBounds([h.getSouthWest().lat,h.getSouthWest().lng],[h.getNorthEast().lat,h.getNorthEast().lng]);OSRM.G.map.fitBoundsUI(f);return OSRM.G.map.getBoundsZoom(f)};OSRM.drawMarkers=function(g){OSRM.G.map.addLayer(new L.LabelMarker([g[0].getPosition().lat,g[0].getPosition().lng],{draggable:false,clickable:false,icon:OSRM.G.icons["marker-source"]}));var h=g.length-1;for(var f=1;f<h;f++){var e=new L.LabelMarker([g[f].getPosition().lat,g[f].getPosition().lng],{draggable:false,clickable:false,icon:OSRM.G.icons["marker-via"]});OSRM.G.map.addLayer(e);e.setLabel(f)}OSRM.G.map.addLayer(new L.LabelMarker([g[h].getPosition().lat,g[h].getPosition().lng],{draggable:false,clickable:false,icon:OSRM.G.icons["marker-target"]}))};OSRM.drawRoute=function(f){if(OSRM.G.route==undefined){OSRM.G.route=new L.Polyline([])}var g=[];if(f[0].lat){for(var h=0,e=f.length;h<e;h++){g.push([f[h].lat,f[h].lng])}}else{for(var h=0,e=f.length;h<e;h++){g.push([f[h][0],f[h][1]])}}OSRM.G.route.setLatLngs(g);OSRM.G.route.setStyle({clickable:false,color:"#0033FF",weight:5,dashArray:""});OSRM.G.map.addLayer(OSRM.G.route)};if(window.opener&&window.opener.OSRM){window.opener.OSRM.Browser.onLoadHandler(window.opener.OSRM.Printing.printWindowLoaded,window)}L.LabelMarker=L.Marker.extend({changeIcon:function(b){this.options.icon=b;if(this._map){this._changeIcon()}},setLabel:function(b){if(this._icon){this._icon.lastChild.innerHTML=b;this._icon.lastChild.style.display="block"}},setTitle:function(b){this.options.title=b;this._icon.title=b},_changeIcon:function(){var f=this.options,g=this._map,h=(g.options.zoomAnimation&&g.options.markerZoomAnimation),e=h?"leaflet-zoom-animated":"leaflet-zoom-hide";if(this._icon){this._icon=f.icon.changeIcon(this._icon);L.DomUtil.addClass(this._icon,e);L.DomUtil.addClass(this._icon,"leaflet-clickable")}}});L.LabelMarkerIcon=L.Icon.extend({_createImg:function(g){var h;if(!L.Browser.ie6){h=document.createElement("div");var f=document.createElement("img");var e=document.createElement("div");f.src=g;e.className="via-counter";e.innerHTML="";h.appendChild(f);h.appendChild(e)}else{h=document.createElement("div");h.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+g+'")'}return h},changeIcon:function(b){return this._changeIcon("icon",b)},changeShadow:function(b){return this.options.shadowUrl?this._changeIcon("shadow",b):null},_changeIcon:function(e,h){var g=this._getIconUrl(e);if(!g){if(e==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var f=this._changeImg(g,h);this._setIconStyles(f,e);return f},_changeImg:function(c,d){if(!L.Browser.ie6){d.firstChild.src=c}else{d.style.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+c+'")'}return d}});OSRM.Control.Map=L.Map.extend({_boundsInsideView:function(l){var k=this.getBounds(),g=this.project(k.getSouthWest()),i=this.project(k.getNorthEast()),h=this.project(l.getSouthWest()),j=this.project(l.getNorthEast());if(i.y>j.y){return false}if(i.x<j.x){return false}if(g.y<h.y){return false}if(g.x>h.x){return false}return true},setViewBounds:function(c){var d=this.getBoundsZoom(c);if(this._zoom>d){this.setView(c.getCenter(),d)}else{if(!this._boundsInsideView(c)){this.setView(c.getCenter(),this._zoom)}}},setViewUI:function(e,g,h){if(OSRM.G.main_handle.boxVisible()){var f=this.project(e,g);f.x-=OSRM.G.main_handle.boxWidth()/2;e=this.unproject(f,g)}this.setView(e,g,h)},setViewBoundsUI:function(k){var j=k.getSouthWest();var l=k.getNorthEast();var g=this.getBoundsZoom(k);var h=this.project(j,g);if(OSRM.G.main_handle.boxVisible()){h.x-=OSRM.G.main_handle.boxWidth()+20}else{h.x-=20}h.y+=20;var i=this.project(l,g);i.y-=20;i.x+=20;k.extend(this.unproject(h,g));k.extend(this.unproject(i,g));this.setViewBounds(k)},fitBoundsUI:function(k){var j=k.getSouthWest();var l=k.getNorthEast();var g=this.getBoundsZoom(k);var h=this.project(j,g);if(OSRM.G.main_handle.boxVisible()){h.x-=OSRM.G.main_handle.boxWidth()+20}else{h.x-=20}h.y+=20;var i=this.project(l,g);i.y-=20;i.x+=20;k.extend(this.unproject(h,g));k.extend(this.unproject(i,g));this.fitBounds(k)},getBoundsUI:function(g){var e=this.getPixelBounds();if(OSRM.G.main_handle.boxVisible()){e.min.x+=OSRM.G.main_handle.boxWidth()}var f=this.unproject(new L.Point(e.min.x,e.max.y),this._zoom,true),h=this.unproject(new L.Point(e.max.x,e.min.y),this._zoom,true);return new L.LatLngBounds(f,h)},getCenterUI:function(d){var e=this.getSize();if(OSRM.G.main_handle.boxVisible()){e.x+=OSRM.G.main_handle.boxWidth()}var f=this._getTopLeftPoint().add(e.divideBy(2));return this.unproject(f,this._zoom,d)},getActiveLayerId:function(){var i=0;var j=OSRM.DEFAULTS.TILE_SERVERS;var h=this.layerControl.getActiveLayerName();for(var f=0,g=j.length;f<g;f++){if(j[f].display_name==h){i=f;break}}return i}});